/*
  # Create retailers table

  1. New Tables
    - `retailers`
      - `id` (uuid, primary key)
      - `name` (text, unique)
      - `created_at` (timestamp)
  2. Security
    - Enable RLS on `retailers` table
    - Add policy for authenticated users to read data
    - Add policy for anon users to read data
*/

CREATE TABLE IF NOT EXISTS retailers (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  name text UNIQUE NOT NULL,
  created_at timestamptz DEFAULT now()
);

-- Insert retailer names from the list
INSERT INTO retailers (name) VALUES
('ADAM McKENZY - PORTMOUTH'),
('ADAM McKENZY - SOUTHAMPTON'),
('ALEX HARVEY - HUDDERSFIELD'),
('ALEX HARVEY - HULL'),
('ARNOLDS CLARK - ABERDEEN'),
('ARNOLDS CLARK - DUNDEE'),
('ARNOLDS CLARK - EDINBURGH'),
('ARNOLDS CLARK - DUMFRIES'),
('ARNOLDS CLARK - ELGIN'),
('ARNOLDS CLARK - INVERNESS'),
('ARNOLDS CLARK - GLASGOW'),
('ARNOLDS CLARK - GRANGE STREET'),
('ARNOLDS CLARK - KIRKCALDY'),
('ARNOLDS CLARK - DUNDEE'),
('ARNOLDS CLARK - STIRLING'),
('ARNOLD CLARK - DUMBARTON'),
('AUGUST MOTORS - BURNLEY'),
('BAKEWELL MOTORS - DERBY'),
('BENTALLS BLUEWATER LTD'),
('BENTALLS KINGSTON'),
('BIG MOTORING WORLD - ENFIELD'),
('BIG MOTORING WORLD'),
('BRADLEY CITROEN'),
('BS MARSON & SONS - NEWCASTLE-UNDER-LYME'),
('BS MARSTON - 32 LONGWALLS'),
('CASTLE MS - SHEFFIELD'),
('CHARLES HURST - BELFAST'),
('CHARLES HURST - DUNDONALD'),
('CITROEN DEALER - COVENTRY'),
('CROPLEYS MS - PETERBOROUGH'),
('DESIRA - BURY ST EDMUNDS'),
('DESIRA - DISS'),
('DESIRA - IPSWICH'),
('DONALD MACKENZIE - INVERNESS'),
('DONNELLY GROUP - BALLYMENA'),
('DONNELLY MOTORS BANGOR'),
('EVANS HALSHAW CITROEN - OXFORD'),
('EVANS HALSHAW FIAT'),
('EVANS HALSHAW KIA'),
('EVANS HALSHAW MAIDSTONE'),
('EVANS HALSHAW WARRINGTON'),
('GLENVARIGILL COMMERCIAL VEHICLES'),
('GROUP 1 - CHELMSFORD'),
('GUEST MOTORS WIKENEY'),
('GUEST TRUCK & VAN - NOTTINGHAM'),
('GUEST TRUCK & VAN - WILLENHALL'),
('GUEST TRUCK & VAN - PETERBOROUGH'),
('GUEST TRUCK & VAN - WOLVERHAMPTON'),
('HARRATS - BLACKPOOL'),
('HARRATS MAMBY - ST AUSTELL'),
('HENDY FORDS'),
('HILL HOUSE CAR CENTRE'),
('HILTON SUZUKI - BEDVASTER'),
('HILTON SUZUKI - CHELMSFORD'),
('HILTON SUZUKI - SOUTHEND'),
('HONDA CHISWICK'),
('HTC Van Centre - OXFORD'),
('HTC Van Centre - READING'),
('HTC Van Centre - SWINDON'),
('JCB HONDA - TAUNTON'),
('JC HALLIDAY - DERRY'),
('JC HALLIDAY - STRABEN'),
('KERRIDGES OF CONFUSION'),
('KINGSLEY CAR CENTRE - ST ALBANS'),
('LE MONT SAINT GARAGE - JERSEY'),
('LIPCCOMBE GARAGE - WORTHING'),
('LIPSCOMBE - MAIDSTONE'),
('LONDON - WIMBLEDON'),
('LUSCOMBE LEEDS'),
('LUSCOMBE LEEDS SUZUKI'),
('MACGREGORS - AVIEMORE'),
('MAC AUTOS - HARROW'),
('MOTORPOINT - BIRMINGHAM'),
('MOTORPOINT - GLASGOW'),
('MOTORPOINT - NEWPORT'),
('MOTORPOINT - BURNLEY'),
('MOTORPOINT - PETERBOROUGH'),
('MOTORPOINT - NOTTINGHAM'),
('MOTORPOINT - NORWICH'),
('MOTORS - CHESTERFIELD'),
('MOTORS - DERBY'),
('MOTORS - GUILDFORD'),
('MOTORS - GLOUCESTER'),
('MOTORS - WEYBRIDGE'),
('MOTORS - WORCESTER'),
('NATHANIEL CARS - CARDIFF'),
('NORTH EAST TRUCK & VAN - BILLINGHAM'),
('NORTH EAST TRUCK & VAN - BLAYDON'),
('NORTH EAST TRUCK & VAN - CARLISLE'),
('NORTH EAST TRUCK & VAN - HULL'),
('NORTH EAST TRUCK & VAN - IMMINGHAM'),
('NORTH EAST TRUCK & VAN - LEEDS'),
('NORTH EAST TRUCK & VAN - YORK'),
('OLYMPIC MOTORS GROUP'),
('PARKWAY VOLKSWAGEN GROUP'),
('Pentagon - Newcastle'),
('PENTAGON - MANCHESTER'),
('PENTAGON VAN DISTRIBUTION CENTRE'),
('Pentagon Lincoln Outer Circle'),
('Pentagon Newark'),
('Pendragon Sheffield Meadowhead'),
('PERRYS - AYLESBURY'),
('PERRYS CITROEN - BARNSLEY'),
('PERRYS CITROEN - HUDDERSFIELD'),
('PEBLEY BEACH - SWINDON'),
('PEUGEOT UK'),
('POLESTAR CARS - CRIBBS'),
('Perrys - Milton Keynes'),
('Perrys - Preston'),
('RIVERSIDE - HOME'),
('ROY WOOD - MILTON KEYNES'),
('SANDYFORD MOTORS - NEWCASTLE'),
('SHERWOODS DURHAM - DARLINGTON'),
('SHERWOODS TRUCK & VAN - STOKE'),
('SHERWOODS GATESHEAD - GATESHEAD'),
('SHERWOODS DARLINGTON'),
('SIMPSON MOTORHOMES'),
('SNOWS - PORTSMOUTH'),
('SNOWS - BASINGSTOKE'),
('SOMERS - AYLESBURY'),
('Shelly Motors - Barnsley'),
('Stadards & Your Store Bedford'),
('Stadards & Your Store Northwich'),
('Stadards & Your Store Derby'),
('Stadards & Your Store Southend (Pitsea)'),
('Stadards & Your Store Towcester Bristol'),
('Stadards & Your Store Northampton'),
('Stadards & You/Your Store Shrewsbury'),
('Stadards Bristol County'),
('Stadards Bristol Preton'),
('Stadards Derby'),
('Stadards Milton Keynes London'),
('Stadards York Clifton Moor'),
('STONECARE - CHESTERFIELD'),
('STONECARE - DONCASTER'),
('STONECARE - SHEFFIELD'),
('STONECARE - WORKSOP'),
('STONEACRE - YORK'),
('STONEACRE - HULL'),
('STONEACRE - CLECKHEATON'),
('STONEACRE - LINCOLN'),
('STONEACRE - DONCASTER'),
('STONEACRE - PETERBOROUGH'),
('STONEACRE - SHEFFIELD'),
('STONEACRE - WAKEFIELD'),
('STONEACRE - BRADFORD'),
('STONEACRE - ROTHERHAM'),
('STONEACRE - SCARBOROUGH'),
('STONEACRE - SCUNTHORPE'),
('STONEACRE - NEWARK'),
('STONEACRE - WREXHAP'),
('STONEACRE - MANSFIELD'),
('STONEACRE - YORK'),
('STONEACRE WORKSOP Ltd'),
('T WALL'),
('THURLOW NUNN GROUP'),
('THOMAS MOTORS - GODSHAM'),
('THOMAS MOTORS - READING GROUP LTD'),
('THOMAS TAUNTON'),
('THURLOW NUNN NORWICH'),
('THURLOW NUNN DUXFORD'),
('Telford Group'),
('TOYOTA BARNSLEY'),
('TRAFFIC TRUCK GROUP'),
('UNDERWOODS - COLCHESTER'),
('UNDERWOODS - SUDBURY'),
('UNITY - COVENTRY'),
('VANTAGE CITROEN - COLNE'),
('VANTAGE CITROEN - OLDHAM'),
('VELY TRUCK - STOCKTON'),
('VOLVO CAR TAUNTON'),
('WYLIES - PERTH'),
('WESTERN - POOLE'),
('WESTERN - YEOVIL'),
('WESTERN COMMERCIALS WESTERN'),
('WINDSOR - HULL'),
('WESTERN SUMMIT TRUCK CENTRE - PRESTON'),
('WHETHILLS - CLITHEROE'),
('WHETHILLS - HASLINGDEN'),
('WILSON & CO VAN CENTRE UK - EPSOM'),
('WINDSOR - WIRRAL'),
('WINDOR - CHELTENHAM')
ON CONFLICT (name) DO NOTHING;

ALTER TABLE retailers ENABLE ROW LEVEL SECURITY;

-- Allow authenticated users to read data
CREATE POLICY "Authenticated users can read retailers data"
  ON retailers
  FOR SELECT
  TO authenticated
  USING (true);

-- Allow anonymous users to read data
CREATE POLICY "Anonymous users can read retailers data"
  ON retailers
  FOR SELECT
  TO anon
  USING (true);